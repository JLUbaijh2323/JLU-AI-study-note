# ç›´è§‚ç†è§£
*ä¸€ç¾¤æ¢é™©è€…ï¼ˆç§ç¾¤ï¼‰åœ¨å´‡å±±å³»å²­ï¼ˆè§£ç©ºé—´ï¼‰ä¸­å¯»æ‰¾æµ·æ‹”æœ€ä½çš„å±±è°·ï¼ˆå…¨å±€æœ€ä¼˜è§£ï¼‰*
>GA:è®©ä¼˜ç§€çš„æ¢é™©è€…â€œäº¤é…â€ï¼Œå¶å°”å‘ç”Ÿå˜å¼‚
>PSOï¼šæ¢é™©è€…äº’ç›¸å–Šè¯ï¼šæˆ‘è¿™é‡Œå¾ˆä½ï¼Œå¾€æˆ‘è¿™é‡Œè·‘
>DEï¼šåˆ©ç”¨æ¢é™©è€…ä¹‹é—´çš„**è·ç¦»å·®**ä½œä¸ºå¯¼èˆª
**æ ¸å¿ƒæ´å¯Ÿ**ï¼šè‡ªé€‚åº”çš„æ­¥é•¿
- å¦‚æœåœ¨æ¢ç´¢åˆæœŸï¼Œæ¢é™©è€…ä»¬åˆ†æ•£çš„å¾ˆå¼€ï¼ˆè·ç¦»æ¯”è¾ƒå¤§ï¼‰ï¼Œé‚£ä¹ˆDEç”Ÿæˆçš„æ¢ç´¢æ­¥é•¿å°±å¾ˆ-å¤§ï¼Œæ–¹ä¾¿è¿›è¡Œ**å…¨å±€æœç´¢**
- æ¢ç´¢åæœŸï¼Œæ¢é™©è€…ä»¬éƒ½èšé›†åœ¨åŒä¸€ä¸ªå±±è°·é™„è¿‘ï¼ˆè·ç¦»å·®å¾ˆå°ï¼‰ï¼Œé‚£ä¹ˆDEç”Ÿæˆçš„æ¢ç´¢æ­¥é•¿å°±ä¼šè‡ªåŠ¨å˜å°ï¼Œæ–¹ä¾¿è¿›è¡Œ**å±€éƒ¨ç²¾ç»†æœç´¢**
## ç®—æ³•æµç¨‹

DE çš„æµç¨‹ä¸é—ä¼ ç®—æ³•ç±»ä¼¼ï¼Œéƒ½åŒ…å«å˜å¼‚ã€äº¤å‰ã€é€‰æ‹©ã€‚ä½†åœ¨å…·ä½“æ“ä½œä¸Šï¼ŒDE å…·æœ‰é©å‘½æ€§çš„ä¸åŒã€‚

å‡è®¾æˆ‘ä»¬è¦è§£å†³ä¸€ä¸ª $D$ ç»´çš„æœ€å°åŒ–é—®é¢˜ã€‚

ç§ç¾¤å¤§å°ä¸º $NP$ï¼Œç¬¬ $G$ ä»£çš„ç¬¬ $i$ ä¸ªä¸ªä½“è¡¨ç¤ºä¸ºå‘é‡ï¼š
$$X_{i, G} = \{x_{i, 1, G}, x_{i, 2, G}, ..., x_{i, D, G}\}$$
DEçš„æ ¸å¿ƒå¾ªç¯ç”±ä»¥ä¸‹ä¸‰æ­¥ç»„æˆï¼š
### å˜å¼‚
è¿™æ˜¯ DE æœ€å…·æ ‡å¿—æ€§çš„æ­¥éª¤ã€‚å¯¹äºç§ç¾¤ä¸­çš„æ¯ä¸€ä¸ª**ç›®æ ‡å‘é‡ (Target Vector)** $X_{i, G}$ï¼Œæˆ‘ä»¬é€šè¿‡ä»¥ä¸‹æ–¹å¼ç”Ÿæˆä¸€ä¸ª**å˜å¼‚å‘é‡ (Mutant Vector)** $V_{i, G}$ï¼š

ä»å½“å‰ç§ç¾¤ä¸­éšæœºé€‰æ‹©ä¸‰ä¸ª**äº’ä¸ç›¸åŒ**çš„ä¸ªä½“ $X_{r1}, X_{r2}, X_{r3}$ï¼Œä¸”å®ƒä»¬éƒ½ä¸ç­‰äºå½“å‰ä¸ªä½“ $X_i$ã€‚

$$V_{i, G} = X_{r1, G} + F \cdot (X_{r2, G} - X_{r3, G})$$
- **$X_{r1, G}$ (åŸºå‘é‡):** å˜å¼‚çš„åŸºå‡†ç‚¹ã€‚
	
- **$(X_{r2, G} - X_{r3, G})$ (å·®åˆ†å‘é‡):** è¿™ä¸¤ä¸ªä¸ªä½“çš„å‘é‡å·®ï¼Œä»£è¡¨äº†æœç´¢çš„æ–¹å‘å’Œè·ç¦»ã€‚
    
- **$F$ (ç¼©æ”¾å› å­):** ä¸€ä¸ªå®æ•°å¸¸æ•°ï¼ˆé€šå¸¸åœ¨ $[0, 2]$ ä¹‹é—´ï¼Œå¸¸ç”¨ 0.5ï¼‰ã€‚å®ƒæ§åˆ¶å·®åˆ†å‘é‡å¯¹å˜å¼‚çš„å½±å“ç¨‹åº¦ã€‚
    

> **æ·±åº¦è§£æï¼š** è¿™ä¸ªå…¬å¼æœ¬è´¨ä¸Šæ˜¯åœ¨è¿›è¡Œ**å‘é‡åŠ æ³•**ã€‚å®ƒåˆ©ç”¨äº†ç¾¤ä½“ä¸­å…¶ä»–ä¸¤ä¸ªä¸ªä½“çš„ç›¸å¯¹ä½ç½®ä¿¡æ¯ï¼Œæ¥â€œæ‰°åŠ¨â€ç¬¬ä¸‰ä¸ªä¸ªä½“ã€‚è¿™å°±æ˜¯ä¸€ç§ä¸éœ€è¦å…ˆéªŒçŸ¥è¯†çš„éšæœºæœç´¢ç­–ç•¥ã€‚
### äº¤å‰
ä¸ºäº†å¢åŠ å¤šæ ·æ€§ï¼ŒDEå¹¶ä¸ç›´æ¥ä½¿ç”¨å˜å¼‚å‘é‡${Vi_G}$æ›¿ä»£è€ä¸€ä»£ï¼Œä»–å°†å˜å¼‚å‘é‡${Vi_G}$ä¸åŸæœ¬çš„ç›®æ ‡å‘é‡${X_iG}$è¿›è¡Œæ··åˆï¼Œç”Ÿæˆè¯•éªŒå‘é‡${U_iG}$

æœ€å¸¸ç”¨åˆ°çš„æ˜¯*äºŒé¡¹å¼äº¤å‰*ï¼Œå¯¹äºå‘é‡çš„æ¯ä¸€ä¸ªç»´åº¦jï¼ˆä»1-Dï¼‰
$$u_{i, j, G} = \begin{cases} v_{i, j, G} & \text{if } (rand_j(0, 1) \le CR) \text{ or } (j = j_{rand}) \\ x_{i, j, G} & \text{otherwise} \end{cases} $$
* **$CR$ (äº¤å‰æ¦‚ç‡):** èŒƒå›´ $[0, 1]$ã€‚$CR$ è¶Šå¤§ï¼Œè¯•éªŒå‘é‡è¶Šåƒå˜å¼‚å‘é‡ï¼›$CR$ è¶Šå°ï¼Œè¯•éªŒå‘é‡è¶ŠåƒåŸæ¥çš„è€ä¸ªä½“ã€‚
* **$j_{rand}$:** ä¸€ä¸ªéšæœºé€‰å–çš„ç»´åº¦ç´¢å¼•ã€‚**è¿™å¼ºåˆ¶ä¿è¯è¯•éªŒå‘é‡è‡³å°‘æœ‰ä¸€ä¸ªç»´åº¦æ˜¯æ¥è‡ªå˜å¼‚å‘é‡çš„**ï¼Œé˜²æ­¢è¯•éªŒå‘é‡å’ŒåŸå‘é‡å®Œå…¨ä¸€æ ·ï¼Œå¯¼è‡´ç®—åŠ›æµªè´¹ã€‚ 
* #### 3\. é€‰æ‹©æ“ä½œ (Selection) 
* DE é‡‡ç”¨çš„æ˜¯**è´ªå©ªç­–ç•¥ (Greedy Selection)**ã€‚è¿™ä¸é—ä¼ ç®—æ³•çš„è½®ç›˜èµŒä¸åŒï¼ŒDE éå¸¸æ®‹é…·ï¼š**åªæœ‰æ›´å¼ºçš„æ‰èƒ½æ´»ä¸‹æ¥**ã€‚ æˆ‘ä»¬å°†è¯•éªŒå‘é‡ $U_{i, G}$ çš„é€‚åº”åº¦å€¼ $f(U_{i, G})$ ä¸åŸç›®æ ‡å‘é‡ $X_{i, G}$ çš„é€‚åº”åº¦å€¼ $f(X_{i, G})$ è¿›è¡Œæ¯”è¾ƒï¼ˆå‡è®¾æ±‚æœ€å°å€¼ï¼‰ï¼š $$X\_{i, G+1} = \begin{cases} U\_{i, G} & \text{if } f(U\_{i, G}) \le f(X\_{i, G}) \\ X\_{i, G} & \text{otherwise} \end{cases} $$è¿™æ„å‘³ç€ï¼šåªæœ‰å½“æ–°ç”Ÿæˆçš„è§£æ¯”åŸæ¥çš„è§£æ›´å¥½ï¼ˆæˆ–ç›¸ç­‰ï¼‰æ—¶ï¼Œå®ƒæ‰ä¼šè¿›å…¥ä¸‹ä¸€ä»£ã€‚å¦åˆ™ï¼ŒåŸæ¥çš„è§£ä¿ç•™ã€‚è¿™ç§æœºåˆ¶ä¿è¯äº†ç¾¤ä½“çš„æœ€ä¼˜è§£å†å²è®°å½•**å•è°ƒä¸å‡**ã€‚
 ----- 
### æ·±åº¦ç­–ç•¥ä¸å‚æ•°åˆ†æ  
* è¦ç²¾é€š DEï¼Œä¸ä»…è¦ä¼šå†™å…¬å¼ï¼Œè¿˜è¦æ‡‚å¾—â€œè°ƒå‚â€å’Œâ€œå˜ä½“â€ã€‚ 
* #### 1\. ç»å…¸çš„ DE å‘½åè§„åˆ™ 
* ä½ å¸¸ä¼šçœ‹åˆ° `DE/rand/1/bin` è¿™æ ·çš„ç¬¦å·ï¼Œè¿™æ˜¯ DE ç­–ç•¥çš„æ ‡å‡†è®°æ³•ï¼Œæ ¼å¼ä¸º `DE/x/y/z`ï¼š 
* **x**: åŸºå‘é‡çš„é€‰æ‹©æ–¹å¼ã€‚ 
* `rand`: éšæœºé€‰æ‹©åŸºå‘é‡ï¼ˆæ¢ç´¢æ€§å¼ºï¼‰ã€‚ 
* `best`: é€‰æ‹©å½“å‰ç§ç¾¤ä¸­æœ€å¥½çš„ä¸ªä½“ä½œä¸ºåŸºå‘é‡ï¼ˆæ”¶æ•›å¿«ï¼Œä½†æ˜“é™·å…¥å±€éƒ¨æœ€ä¼˜ï¼‰ã€‚
* **y**: ä½¿ç”¨å·®åˆ†å‘é‡çš„ä¸ªæ•°ã€‚
* `1`: ä½¿ç”¨ 1 ä¸ªå·®åˆ†å‘é‡ ($X_{r2} - X_{r3}$)ã€‚
* `2`: ä½¿ç”¨ 2 ä¸ªå·®åˆ†å‘é‡ã€‚ 
* **z**: äº¤å‰æ¨¡å¼ã€‚
* `bin`: äºŒé¡¹å¼äº¤å‰ï¼ˆå³ä¸Šé¢ä»‹ç»çš„ï¼‰ã€‚ 
* `exp`: æŒ‡æ•°äº¤å‰ï¼ˆç±»ä¼¼ä¸¤ç‚¹äº¤å‰ï¼‰ã€‚ 
* **å¸¸è§ç­–ç•¥å¯¹æ¯”ï¼š** 
* **DE/rand/1/bin:** æœ€ç»å…¸ï¼Œé²æ£’æ€§æœ€å¼ºï¼Œé€‚åˆå¤§å¤šæ•°é—®é¢˜ã€‚ 
* **DE/best/1/bin:** æ”¶æ•›é€Ÿåº¦æå¿«ï¼Œé€‚åˆç®€å•çš„å•å³°å‡½æ•°ï¼Œä½†åœ¨å¤æ‚å¤šå³°å‡½æ•°ä¸Šå®¹æ˜“æ—©ç†Ÿã€‚ 
* **DE/current-to-best/1/bin:** ä¸€ä¸ªæŠ˜ä¸­æ–¹æ¡ˆï¼Œåˆ©ç”¨è‡ªèº«å‘æœ€ä¼˜è§£é è¿‘çš„åŒæ—¶ï¼Œåˆ©ç”¨å·®åˆ†ä¿æŒéšæœºæ€§ã€‚ 
* #### 2\. å…³é”®æ§åˆ¶å‚æ•°çš„å½±å“ 
* **ç§ç¾¤è§„æ¨¡ ($NP$)**: 
* é€šå¸¸è®¾ä¸ºé—®é¢˜ç»´åº¦ $D$ çš„ 5 åˆ° 10 å€ã€‚ 
* å¤ªå°ï¼šå¤šæ ·æ€§ä¸è¶³ï¼Œæ˜“é™·å…¥å±€éƒ¨æœ€ä¼˜ã€‚ 
* å¤ªå¤§ï¼šè®¡ç®—æˆæœ¬é«˜ï¼Œæ”¶æ•›æ…¢ã€‚ 
* **ç¼©æ”¾å› å­ ($F$)**: 
* é€šå¸¸åœ¨ $[0.4, 1.0]$ ä¹‹é—´ã€‚ 
* **$F$ è¶Šå¤§**ï¼šæ‰°åŠ¨è¶Šå¤§ï¼Œæ¢ç´¢èƒ½åŠ›è¶Šå¼ºï¼ˆè·³å‡ºå±€éƒ¨æœ€ä¼˜ï¼‰ï¼Œä½†æ”¶æ•›å˜æ…¢ã€‚ 
* **$F$ è¶Šå°**ï¼šæ”¶æ•›è¶Šå¿«ï¼Œä½†å®¹æ˜“æ—©ç†Ÿã€‚ 
* **äº¤å‰æ¦‚ç‡ ($CR$)**: 
* é€šå¸¸åœ¨ $[0.1, 0.9]$ ä¹‹é—´ã€‚ 
* **$CR$ å¤§ (e.g., 0.9)**ï¼šé€‚åˆ**ä¸å¯åˆ†é—®é¢˜**ï¼ˆå˜é‡ä¹‹é—´æœ‰å¼ºç›¸å…³æ€§ï¼‰ï¼Œå› ä¸ºä¸€æ¬¡æ€§æ”¹å˜å¤šä¸ªç»´åº¦æ›´èƒ½é€‚åº”å¤æ‚åœ°å½¢ã€‚ 
* **$CR$ å° (e.g., 0.2)**ï¼šé€‚åˆ**å¯åˆ†é—®é¢˜**ï¼Œæ¯æ¬¡åªå¾®è°ƒå‡ ä¸ªç»´åº¦ã€‚ 
---
### ğŸ’» ç¬¬å››å±‚ï¼šPython ä»£ç å®æˆ˜ (Implementation) 
Talk is cheap. 
è®©æˆ‘ä»¬çœ‹ä¸€ä¸ªç®€æ´ä½†åŠŸèƒ½å®Œæ•´çš„ Python å®ç°ï¼Œç”¨äºæ±‚è§£ç»å…¸çš„ **Rastrigin å‡½æ•°**ï¼ˆä¸€ä¸ªå……æ»¡å±€éƒ¨æœ€ä¼˜é™·é˜±çš„æµ‹è¯•å‡½æ•°ï¼‰ã€‚ 
```python 
import numpy as np
import matplotlib.pyplot as plt

# 1. å®šä¹‰ç›®æ ‡å‡½æ•° (Rastrigin Function)
# å…¨å±€æœ€å°å€¼ä¸º 0ï¼Œåœ¨ x = [0, 0, ..., 0] å¤„
def objective_function(x):
    A = 10
    return A * len(x) + sum([(xi ** 2 - A * np.cos(2 * np.pi * xi)) for xi in x])


# 2. DE ç®—æ³•ä¸»ç±»
class DifferentialEvolution:
    def __init__(self, func, bounds, pop_size=50, mutation_factor=0.8, crossover_prob=0.7, max_gen=1000):
        self.func = func
        self.bounds = bounds  # è¾¹ç•Œ [(min, max), (min, max)...]
        self.dim = len(bounds)
        self.pop_size = pop_size
        self.F = mutation_factor
        self.CR = crossover_prob
        self.max_gen = max_gen

        # åˆå§‹åŒ–ç§ç¾¤
        self.population = np.zeros((pop_size, self.dim))
        for i in range(self.dim):
            min_val, max_val = self.bounds[i]
            self.population[:, i] = np.random.uniform(min_val, max_val, pop_size)

        # è®¡ç®—åˆå§‹é€‚åº”åº¦
        self.fitness = np.array([self.func(ind) for ind in self.population])

        # è®°å½•æœ€ä¼˜è§£
        self.best_idx = np.argmin(self.fitness)
        self.best_score = self.fitness[self.best_idx]
        self.best_vector = self.population[self.best_idx]

    def evolve(self):
        history = []
        for gen in range(self.max_gen):
            for i in range(self.pop_size):
                # --- å˜å¼‚ (Mutation) ---
                # éšæœºé€‰æ‹© r1, r2, r3ï¼Œä¸”ä¸ç­‰äº i
                candidates = [idx for idx in range(self.pop_size) if idx != i]
                r1, r2, r3 = np.random.choice(candidates, 3, replace=False)

                x_r1 = self.population[r1]
                x_r2 = self.population[r2]
                x_r3 = self.population[r3]

                mutant = x_r1 + self.F * (x_r2 - x_r3)

                # è¾¹ç•Œå¤„ç† (ç®€å•çš„æˆªæ–­æ³•)
                for d in range(self.dim):
                    min_val, max_val = self.bounds[d]
                    mutant[d] = np.clip(mutant[d], min_val, max_val)

                # --- äº¤å‰ (Crossover) ---
                trial = np.copy(self.population[i])
                j_rand = np.random.randint(self.dim)  # ä¿è¯è‡³å°‘å˜ä¸€ä¸ª

                for j in range(self.dim):
                    if np.random.rand() < self.CR or j == j_rand:
                        trial[j] = mutant[j]

                # --- é€‰æ‹© (Selection) ---
                trial_fitness = self.func(trial)
                if trial_fitness <= self.fitness[i]:
                    self.population[i] = trial
                    self.fitness[i] = trial_fitness

                    # æ›´æ–°å…¨å±€æœ€ä¼˜
                    if trial_fitness < self.best_score:
                        self.best_score = trial_fitness
                        self.best_vector = trial

            history.append(self.best_score)

            # æ‰“å°è¿›åº¦ (å¯é€‰)
            # if gen % 100 == 0:
            #     print(f"Gen {gen}: Best Score = {self.best_score:.5f}")

        return self.best_vector, self.best_score, history


# 3. è¿è¡Œç¤ºä¾‹
if __name__ == "__main__":
    # è®¾å®š 5 ç»´é—®é¢˜ï¼Œæœç´¢èŒƒå›´ [-5.12, 5.12]
    bounds = [(-5.12, 5.12)] * 5

    de = DifferentialEvolution(objective_function, bounds, pop_size=50, max_gen=200)
    best_sol, best_val, history = de.evolve()

    print(f"æœ€ä¼˜è§£å‘é‡: {np.round(best_sol, 4)}")
    print(f"æœ€ä¼˜å‡½æ•°å€¼: {best_val:.10f}")

    # ç®€å•çš„ç»˜å›¾æŸ¥çœ‹æ”¶æ•›æ›²çº¿
    # plt.plot(history)
    # plt.yscale('log')
    # plt.title('DE Convergence')
    # plt.show()
 
```
 ----- 
 ### ğŸ† æ€»ç»“ä¸å¯¹æ¯” 
| ç‰¹æ€§        | å·®åˆ†è¿›åŒ– (DE)       | é—ä¼ ç®—æ³• (GA)      | ç²’å­ç¾¤ (PSO)       |     |
| :-------- | :-------------- | :------------- | :-------------- | --- |
| **æ ¸å¿ƒé©±åŠ¨åŠ›** | **å˜å¼‚** (å·®åˆ†å‘é‡)   | **äº¤å‰** (æŸ“è‰²ä½“äº¤æ¢) | **ç¤¾ä¼šå¿ƒç†** (è·Ÿéšæå€¼) |     |
| **ç¼–ç æ–¹å¼**  | å®æ•°ç¼–ç  (å¤©ç„¶ä¼˜åŠ¿)     | é€šå¸¸äºŒè¿›åˆ¶ (éœ€è§£ç )    | å®æ•°ç¼–ç             |     |
| **å‚æ•°æ•°é‡**  | å°‘ ($NP, F, CR$) | å¤š (é€‰æ‹©ã€äº¤å‰ã€å˜å¼‚ç‡ç­‰) | ä¸­ ($w, c1, c2$) |     |
| **é€‰æ‹©æœºåˆ¶**  | ç¡®å®šæ€§ (ä¼˜èƒœåŠ£æ±°)      | æ¦‚ç‡æ€§ (è½®ç›˜èµŒ)      | æ—  (ç›´æ¥æ›´æ–°ä½ç½®)      |     |
| **é€‚ç”¨åœºæ™¯**  | **å¤æ‚è¿ç»­å‡½æ•°ä¼˜åŒ–**    | ç¦»æ•£ä¼˜åŒ–ã€ç»„åˆä¼˜åŒ–      | å¿«é€Ÿæ”¶æ•›éœ€æ±‚          |     |
**ä¸€å¥è¯æ€»ç»“ DEï¼š** å·®åˆ†è¿›åŒ–ç®—æ³•é€šè¿‡**ç§ç¾¤å†…éƒ¨çš„å·®å¼‚**æ¥äº§ç”Ÿå˜å¼‚ï¼Œåˆ©ç”¨**è´ªå©ªçš„é€‰æ‹©æœºåˆ¶**ä¿ç•™ç²¾åï¼Œæ˜¯ä¸€ç§**ç»“æ„æç®€ä½†å¨åŠ›å·¨å¤§**çš„å®æ•°ä¼˜åŒ–ç®—æ³•ã€‚